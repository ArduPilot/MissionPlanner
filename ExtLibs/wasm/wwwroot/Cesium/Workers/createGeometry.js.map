{"version":3,"file":"createGeometry.js","sources":["../../../../Source/WorkersES6/createGeometry.js"],"sourcesContent":["/* global require */\nimport defined from \"../Core/defined.js\";\nimport PrimitivePipeline from \"../Scene/PrimitivePipeline.js\";\nimport when from \"../ThirdParty/when.js\";\nimport createTaskProcessorWorker from \"./createTaskProcessorWorker.js\";\n\nvar moduleCache = {};\n\nfunction getModule(moduleName) {\n  var module = moduleCache[moduleName];\n  if (!defined(module)) {\n    if (typeof exports === \"object\") {\n      // Use CommonJS-style require.\n      moduleCache[module] = module = require(\"Workers/\" + moduleName);\n    } else {\n      // Use AMD-style require.\n      // in web workers, require is synchronous\n      require([\"Workers/\" + moduleName], function (f) {\n        module = f;\n        moduleCache[module] = f;\n      });\n    }\n  }\n  return module;\n}\n\nfunction createGeometry(parameters, transferableObjects) {\n  var subTasks = parameters.subTasks;\n  var length = subTasks.length;\n  var resultsOrPromises = new Array(length);\n\n  for (var i = 0; i < length; i++) {\n    var task = subTasks[i];\n    var geometry = task.geometry;\n    var moduleName = task.moduleName;\n\n    if (defined(moduleName)) {\n      var createFunction = getModule(moduleName);\n      resultsOrPromises[i] = createFunction(geometry, task.offset);\n    } else {\n      //Already created geometry\n      resultsOrPromises[i] = geometry;\n    }\n  }\n\n  return when.all(resultsOrPromises, function (results) {\n    return PrimitivePipeline.packCreateGeometryResults(\n      results,\n      transferableObjects\n    );\n  });\n}\nexport default createTaskProcessorWorker(createGeometry);\n"],"names":["defined","when","PrimitivePipeline"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;EAAA;AAKA;EACA,IAAI,WAAW,GAAG,EAAE,CAAC;AACrB;EACA,SAAS,SAAS,CAAC,UAAU,EAAE;EAC/B,EAAE,IAAI,MAAM,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC;EACvC,EAAE,IAAI,CAACA,YAAO,CAAC,MAAM,CAAC,EAAE;EACxB,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;EACrC;EACA,MAAM,WAAW,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC;EACtE,KAAK,MAAM;EACX;EACA;EACA,MAAM,OAAO,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC,EAAE,UAAU,CAAC,EAAE;EACtD,QAAQ,MAAM,GAAG,CAAC,CAAC;EACnB,QAAQ,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;EAChC,OAAO,CAAC,CAAC;EACT,KAAK;EACL,GAAG;EACH,EAAE,OAAO,MAAM,CAAC;EAChB,CAAC;AACD;EACA,SAAS,cAAc,CAAC,UAAU,EAAE,mBAAmB,EAAE;EACzD,EAAE,IAAI,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;EACrC,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;EAC/B,EAAE,IAAI,iBAAiB,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAC5C;EACA,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;EACnC,IAAI,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC3B,IAAI,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;EACjC,IAAI,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACrC;EACA,IAAI,IAAIA,YAAO,CAAC,UAAU,CAAC,EAAE;EAC7B,MAAM,IAAI,cAAc,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;EACjD,MAAM,iBAAiB,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;EACnE,KAAK,MAAM;EACX;EACA,MAAM,iBAAiB,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;EACtC,KAAK;EACL,GAAG;AACH;EACA,EAAE,OAAOC,SAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,UAAU,OAAO,EAAE;EACxD,IAAI,OAAOC,mCAAiB,CAAC,yBAAyB;EACtD,MAAM,OAAO;EACb,MAAM,mBAAmB;EACzB,KAAK,CAAC;EACN,GAAG,CAAC,CAAC;EACL,CAAC;AACD,yBAAe,yBAAyB,CAAC,cAAc,CAAC;;;;;;;;"}